(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f37bd62"],{"122d":function(t,e,a){},3924:function(t,e,a){"use strict";var r=a("122d"),s=a.n(r);s.a},"511f":function(t,e,a){},"6b4a":function(t,e,a){"use strict";var r=a("511f"),s=a.n(r);s.a},"7cb1":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("order-header",{attrs:{title:"我的购物车"},scopedSlots:t._u([{key:"tip",fn:function(){return[a("span",[t._v("温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")])]},proxy:!0}])}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"cart-box"},[a("ul",{staticClass:"cart-item-head"},[a("li",{staticClass:"col-1"},[a("span",{staticClass:"checkbox",class:{checked:t.allChecked},on:{click:t.toggleAll}}),t._v("全选")]),a("li",{staticClass:"col-3"},[t._v("商品名称")]),a("li",{staticClass:"col-1"},[t._v("单价")]),a("li",{staticClass:"col-2"},[t._v("数量")]),a("li",{staticClass:"col-1"},[t._v("小计")]),a("li",{staticClass:"col-1"},[t._v("操作")])]),a("ul",{staticClass:"cart-item-list"},t._l(t.list,(function(e,r){return a("li",{key:r,staticClass:"cart-item"},[a("div",{staticClass:"item-check"},[a("span",{staticClass:"checkbox",class:{checked:e.productSelected},on:{click:function(a){return t.updateCart(e)}}})]),a("div",{staticClass:"item-name"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productMainImage,expression:"item.productMainImage"}],attrs:{alt:""}}),a("span",[t._v(t._s(e.productName+" , "+e.productSubtitle))])]),a("div",{staticClass:"item-price"},[t._v(t._s(e.productPrice))]),a("div",{staticClass:"item-num"},[a("div",{staticClass:"num-box"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.updateCart(e,"-")}}},[t._v("-")]),a("span",[t._v(t._s(e.quantity))]),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.updateCart(e,"+")}}},[t._v("+")])])]),a("div",{staticClass:"item-total"},[t._v(t._s(e.productTotalPrice))]),a("div",{staticClass:"item-del",on:{click:function(a){return t.delProduct(e)}}})])})),0)]),a("div",{staticClass:"order-wrap clearfix"},[a("div",{staticClass:"cart-tip fl"},[a("a",{attrs:{href:"/#/index"}},[t._v("继续购物")]),t._v(" 共"),a("span",[t._v(t._s(t.list.length))]),t._v("件商品，已选择"),a("span",[t._v(t._s(t.checkedNum))]),t._v("件 ")]),a("div",{staticClass:"total fr"},[t._v(" 合计："),a("span",[t._v(t._s(t.cartTotalPrice))]),t._v("元 "),a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.order}},[t._v("去结算")])])])])]),a("service-bar"),a("nav-footer")],1)},s=[],c=(a("a623"),a("4de4"),a("c3d4")),i=a("984c"),n=a("f091"),l={name:"index",components:{OrderHeader:c["a"],ServiceBar:i["a"],NavFooter:n["a"]},data:function(){return{list:[],allChecked:!1,cartTotalPrice:0,checkedNum:0}},mounted:function(){this.getCartList()},methods:{getCartList:function(){var t=this;this.axios.get("/carts").then((function(e){t.renderData(e)}))},updateCart:function(t,e){var a=this,r=t.quantity,s=t.productSelected;if("-"==e){if(1==r)return void this.$message.warning("商品至少保留一件");--r}else if("+"==e){if(r>t.productStock)return void this.$message.warning("购买数量不能超过库存数量");++r}else s=!t.productSelected;this.axios.put("/carts/".concat(t.productId),{quantity:r,selected:s}).then((function(t){a.renderData(t)}))},delProduct:function(t){var e=this;this.axios.delete("/carts/".concat(t.productId)).then((function(t){e.$message.success("删除成功"),e.renderData(t)}))},toggleAll:function(){var t=this,e=this.allChecked?"/carts/unSelectAll":"/carts/selectAll";this.axios.put(e).then((function(e){t.renderData(e)}))},renderData:function(t){this.list=t.cartProductVoList||[],this.allChecked=t.selectedAll,this.cartTotalPrice=t.cartTotalPrice,this.checkedNum=this.list.filter((function(t){return t.productSelected})).length},order:function(){var t=this.list.every((function(t){return!t.productSelected}));t?this.$message.warning("请选择一件商品"):this.$router.push("/order/confirm")}}},o=l,u=(a("3924"),a("2877")),d=Object(u["a"])(o,r,s,!1,null,null,null);e["default"]=d.exports},a623:function(t,e,a){"use strict";var r=a("23e7"),s=a("b727").every,c=a("b301");r({target:"Array",proto:!0,forced:c("every")},{every:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},c3d4:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-header"},[a("div",{staticClass:"container clearfix"},[t._m(0),a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.title)),t._t("tip")],2)]),a("div",{staticClass:"username"},[a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.username))])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-logo"},[a("a",{attrs:{href:"/#/index"}})])}],c=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("2fa7")),i=a("2f62");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(a,!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var o={name:"order-header",props:{title:String},computed:l({},Object(i["c"])(["username"]))},u=o,d=(a("6b4a"),a("2877")),v=Object(d["a"])(u,r,s,!1,null,null,null);e["a"]=v.exports}}]);
//# sourceMappingURL=chunk-0f37bd62.735e57d9.js.map